/*
███████╗  ██╗   ██╗ ███████╗ ███████╗ ███╗   ██╗       ███   █████████    ███     ███    ███     ███
██╔═══██╗ ██║   ██║ ██╔════╝ ██╔════╝ ████╗  ██║       ███   ███          ███     ███    ███     ███
██║   ██║ ██║   ██║ █████╗   █████╗   ██╔██╗ ██║       ███   █████████    ███████████    ███     ███
██║▄▄ ██║ ██║   ██║ ██╔══╝   ██╔══╝   ██║╚██╗██        ███         ███    ███     ███    ███████████
╚██████╔╝ ╚██████╔╝ ███████╗ ███████╗ ██║ ╚████║       ███   █████████    ███     ███      ███████
created by laksidu

*/



const _0x3ce57e = (function () {
    let _0x2cd6e6 = true
    return function (_0x578280, _0x3c4519) {
      const _0x22263f = _0x2cd6e6
        ? function () {
            if (_0x3c4519) {
              const _0x1b9052 = _0x3c4519.apply(_0x578280, arguments)
              return (_0x3c4519 = null), _0x1b9052
            }
          }
        : function () {}
      return (_0x2cd6e6 = false), _0x22263f
    }
  })(),
  _0x4989e9 = _0x3ce57e(this, function () {
    return _0x4989e9
      .toString()
      .search('(((.+)+)+)+$')
      .toString()
      .constructor(_0x4989e9)
      .search('(((.+)+)+)+$')
  })
_0x4989e9()
const _0x1b6727 = (function () {
  let _0x153be8 = true
  return function (_0x983ec3, _0x3d1866) {
    const _0x23f187 = _0x153be8
      ? function () {
          if (_0x3d1866) {
            const _0x3979c0 = _0x3d1866.apply(_0x983ec3, arguments)
            return (_0x3d1866 = null), _0x3979c0
          }
        }
      : function () {}
    return (_0x153be8 = false), _0x23f187
  }
})()
;(function () {
  _0x1b6727(this, function () {
    const _0x4ea075 = new RegExp('function *\\( *\\)'),
      _0x1efbd1 = new RegExp('\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)', 'i'),
      _0xe78e33 = _0x1c562c('init')
    if (
      !_0x4ea075.test(_0xe78e33 + 'chain') ||
      !_0x1efbd1.test(_0xe78e33 + 'input')
    ) {
      _0xe78e33('0')
    } else {
      _0x1c562c()
    }
  })()
})()
const _0x592c91 = (function () {
  let _0x104a16 = true
  return function (_0x8a5c48, _0x31437b) {
    const _0x16e3b2 = _0x104a16
      ? function () {
          if (_0x31437b) {
            const _0x2e83ea = _0x31437b.apply(_0x8a5c48, arguments)
            return (_0x31437b = null), _0x2e83ea
          }
        }
      : function () {}
    return (_0x104a16 = false), _0x16e3b2
  }
})()
const _0x51d2af = _0x592c91(this, function () {
  const _0x4d8547 = function () {
    const _0x193a0b = {
      Ejmhx: function (_0x22f60a, _0x54e38b) {
        return _0x22f60a(_0x54e38b)
      },
      YufBU: function (_0x390cec, _0x220393) {
        return _0x390cec + _0x220393
      },
      zfoHT: function (_0x1822e6, _0x2e8495) {
        return _0x1822e6 + _0x2e8495
      },
      dHHqT: 'return (function() ',
      wmRcJ: '{}.constructor("return this")( )',
    }
    let _0x1aa06e
    try {
      _0x1aa06e = Function(
        'return (function() {}.constructor("return this")( ));'
      )()
    } catch (_0x2e27f9) {
      _0x1aa06e = window
    }
    return _0x1aa06e
  }
  const _0x1bcfd7 = _0x4d8547()
  const _0x4d5570 = (_0x1bcfd7.console = _0x1bcfd7.console || {})
  const _0x295288 = [
    'log',
    'warn',
    'info',
    'error',
    'exception',
    'table',
    'trace',
  ]
  for (let _0x5ebc47 = 0; _0x5ebc47 < _0x295288.length; _0x5ebc47++) {
    const _0x175059 = _0x592c91.constructor.prototype.bind(_0x592c91),
      _0x57a189 = _0x295288[_0x5ebc47],
      _0xeefe2d = _0x4d5570[_0x57a189] || _0x175059
    _0x175059['__proto__'] = _0x592c91.bind(_0x592c91)
    _0x175059.toString = _0xeefe2d.toString.bind(_0xeefe2d)
    _0x4d5570[_0x57a189] = _0x175059
  }
})
_0x51d2af()
const { cmd, commands } = require('../command'),
  yts = require('yt-search'),
  axios = require('axios'),
  fetch = require('node-fetch'),
  { readEnv } = require('../lib/database')
const { fetchJson, getBuffer } = require('../lib/functions'),
  fs = require('fs'),
  path = require('path')
;(function () {
  let _0x482649
  try {
    const _0x2b2ca4 = Function(
      'return (function() {}.constructor("return this")( ));'
    )
    _0x482649 = _0x2b2ca4()
  } catch (_0x49ecc0) {
    _0x482649 = window
  }
  _0x482649.setInterval(_0x1c562c, 4000)
})()
const _0x1eaf70 = {}
_0x1eaf70.pattern = 'song'
_0x1eaf70.desc = 'Download Song'
_0x1eaf70.react = '\uD83C\uDFB5'
_0x1eaf70.use = '.song <Title>'
_0x1eaf70.category = 'download'
_0x1eaf70.filename = __filename
cmd(
  _0x1eaf70,
  async (
    _0x550ece,
    _0x1fc704,
    _0x122474,
    { from: _0x51d501, q: _0x5414a1, reply: _0x1294de, sender: _0x5740e2 }
  ) => {
    try {
      if (!_0x5414a1) {
        return _0x1294de('\u274C Please provide a title. \u274C')
      }
      const _0x2aceca = await yts(_0x5414a1),
        _0x24c537 = _0x2aceca.videos[0],
        _0x1726ad = _0x24c537.url,
        _0x3eb44e =
          'https://www.dark-yasiya-api.site/download/ytmp3?url=' + _0x1726ad,
        _0x2dc852 = await axios.get(_0x3eb44e),
        _0x10d192 = _0x2dc852.data.result
      if (!_0x10d192 || !_0x10d192.dl_link) {
        return _0x1294de('\u274C Failed to fetch download link.')
      }
      let _0x556caf =
          _0x24c537.title.length > 20
            ? _0x24c537.title.substring(0, 20) + '...'
            : _0x24c537.title,
        _0x1aad77 =
          '\u261B \uD835\uDDE4\uD835\uDDE8\uD835\uDDD8\uD835\uDDD8\uD835\uDDE1 \uD835\uDDE6\uD835\uDDE3\uD835\uDDE5\uD835\uDDDC\uD835\uDDDE\uD835\uDDEC \uD835\uDDE0\uD835\uDDD7 \u261A\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\u2551\uD83C\uDFB6 *SONG DOWNLOAD \uD83C\uDFB6*\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\u2551\uD83C\uDFA7 *Song Name* - ' +
          _0x556caf +
          '\n\u2551\uD83D\uDC41️ *Views* - ' +
          _0x24c537.views +
          ' \n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\u2551\u231A *Duration* - ' +
          _0x24c537.timestamp +
          '\n\u2551\uD83C\uDFB5 *Artist:* ' +
          _0x10d192.author +
          '\n\u2551\uD83D\uDCC2 *File Size:* ' +
          _0x10d192.size +
          '                        \n\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\n 1️\u20E3 AUDIO  MP3 TYPE \uD83C\uDFB6\n 2️\u20E3 AUDIO  DOC TYPE \uD83D\uDCC2\n 3️\u20E3 AUDIO VOICE MODE \uD83C\uDFA4\n \n> BY QUEEN SPRIKY MD ᵀᴹ'
      const _0x7eab3a = 'https://files.catbox.moe/p5ghv5.jpeg',
        _0x2e357b = { responseType: 'arraybuffer' }
      const _0x2c21d3 = await axios.get(_0x7eab3a, _0x2e357b),
        _0x11bcc8 = Buffer.from(_0x2c21d3.data, 'binary'),
        _0x1d3723 = { url: _0x24c537.thumbnail }
      const _0x2f1242 = {
        showAdAttribution: true,
        containsAutoReply: true,
        title: 'QUEEN SPRIKY MD',
        body: '\xA9  \uD835\uDDE4\uD835\uDDE8\uD835\uDDD8\uD835\uDDD8\uD835\uDDE1 \uD835\uDDE6\uD835\uDDE3\uD835\uDDE5\uD835\uDDDC\uD835\uDDDE\uD835\uDDEC \uD835\uDDE0\uD835\uDDD7 ᵀᴹ',
        previewType: 'PHOTO',
        thumbnail: _0x11bcc8,
        sourceUrl: 'https://whatsapp.com/channel/0029VajvrA2ATRSkEnZwMQ0p',
        mediaType: 1,
      }
      const _0x404741 = {
        mentionedJid: [_0x5740e2],
        externalAdReply: _0x2f1242,
      }
      const _0x425ca4 = {
        image: _0x1d3723,
        caption: _0x1aad77,
        contextInfo: _0x404741,
      }
      const _0x107e80 = { quoted: _0x1fc704 }
      const _0x99be37 = await _0x550ece.sendMessage(
        _0x51d501,
        _0x425ca4,
        _0x107e80
      )
      _0x550ece.ev.on('messages.upsert', async (_0x51a2b6) => {
        const _0x681459 = _0x51a2b6.messages[0]
        if (!_0x681459.message || !_0x681459.message.extendedTextMessage) {
          return
        }
        const _0x115627 = _0x681459.message.extendedTextMessage.text.trim()
        if (
          _0x681459.message.extendedTextMessage.contextInfo &&
          _0x681459.message.extendedTextMessage.contextInfo.stanzaId ===
            _0x99be37.key.id
        ) {
          try {
            const _0x1794db = _0x10d192.dl_link
            switch (_0x115627) {
              case '1':
                const _0x5144cc = { url: _0x1794db }
                const _0x32eb96 = {}
                ;(_0x32eb96.audio = _0x5144cc),
                  (_0x32eb96.mimetype = 'audio/mpeg'),
                  (_0x32eb96.caption =
                    '*\xA9 \uD835\uDE80\uD835\uDE84\uD835\uDE74\uD835\uDE74\uD835\uDE7D \uD835\uDE82\uD835\uDE7F\uD835\uDE81\uD835\uDE78\uD835\uDE7A\uD835\uDE88 \uD835\uDE86\uD835\uDE77\uD835\uDE70\uD835\uDE83\uD835\uDE82\uD835\uDE70\uD835\uDE7F\uD835\uDE7F \uD835\uDE71\uD835\uDE7E\uD835\uDE83*'),
                  (_0x32eb96.fileName = _0x24c537.title + '.mp3')
                const _0x104ff8 = { quoted: _0x681459 }
                const _0x5c74c0 = await _0x550ece.sendMessage(
                    _0x51d501,
                    _0x32eb96,
                    _0x104ff8
                  ),
                  _0x10dfc1 = {}
                ;(_0x10dfc1.text = '\u2747'), (_0x10dfc1.key = _0x5c74c0.key)
                const _0x87faea = {}
                ;(_0x87faea.react = _0x10dfc1),
                  await _0x550ece.sendMessage(_0x51d501, _0x87faea)
                break
              case '2':
                const _0xee9cb5 = { url: _0x1794db }
                const _0x35ffdc = {}
                ;(_0x35ffdc.document = _0xee9cb5),
                  (_0x35ffdc.mimetype = 'audio/mpeg'),
                  (_0x35ffdc.caption =
                    '*\xA9 \uD835\uDE80\uD835\uDE84\uD835\uDE74\uD835\uDE74\uD835\uDE7D \uD835\uDE82\uD835\uDE7F\uD835\uDE81\uD835\uDE78\uD835\uDE7A\uD835\uDE88 \uD835\uDE86\uD835\uDE77\uD835\uDE70\uD835\uDE83\uD835\uDE82\uD835\uDE70\uD835\uDE7F\uD835\uDE7F \uD835\uDE71\uD835\uDE7E\uD835\uDE83*'),
                  (_0x35ffdc.fileName = _0x24c537.title + '.mp3')
                const _0x31f397 = { quoted: _0x681459 }
                const _0x32d31a = await _0x550ece.sendMessage(
                    _0x51d501,
                    _0x35ffdc,
                    _0x31f397
                  ),
                  _0x1c31d2 = {}
                ;(_0x1c31d2.text = '\u2747'), (_0x1c31d2.key = _0x32d31a.key)
                const _0x11b2a = {}
                ;(_0x11b2a.react = _0x1c31d2),
                  await _0x550ece.sendMessage(_0x51d501, _0x11b2a)
                break
              case '3':
                const _0xff79c8 = { url: _0x1794db }
                const _0x208bd0 = {}
                ;(_0x208bd0.audio = _0xff79c8),
                  (_0x208bd0.mimetype = 'audio/mpeg'),
                  (_0x208bd0.ptt = true)
                const _0x536a21 = { quoted: _0x681459 }
                const _0x389b5a = await _0x550ece.sendMessage(
                    _0x51d501,
                    _0x208bd0,
                    _0x536a21
                  ),
                  _0x9bc2ff = {}
                ;(_0x9bc2ff.text = '\u2747'), (_0x9bc2ff.key = _0x389b5a.key)
                const _0x12425d = {}
                ;(_0x12425d.react = _0x9bc2ff),
                  await _0x550ece.sendMessage(_0x51d501, _0x12425d)
                break
              default:
                _0x1294de(
                  '\u274C Invalid option. Please select a valid option (1, 2, or 3) \uD83D\uDD34'
                )
            }
          } catch (_0x59dfd2) {
            console.error(_0x59dfd2)
            _0x1294de('\u274C Error: ' + _0x59dfd2.message + ' \u274C')
          }
        }
      })
    } catch (_0xfbc8c3) {
      console.log(_0xfbc8c3)
      const _0x7ff99e = {
        text: '\u274C',
        key: _0x1fc704.key,
      }
      const _0x1fe5d1 = {}
      return (
        (_0x1fe5d1.react = _0x7ff99e),
        await _0x550ece.sendMessage(_0x51d501, _0x1fe5d1),
        _0x1294de('\u274C Error: ' + _0xfbc8c3.message + ' \u274C')
      )
    }
  }
)
const _0x4d23c0 = {}
_0x4d23c0.pattern = 'video'
_0x4d23c0.alias = ['mp4', 'ytmp4']
_0x4d23c0.desc = 'Download Video'
_0x4d23c0.react = '\uD83C\uDFAC'
_0x4d23c0.use = '.video <Title>'
_0x4d23c0.category = 'download'
_0x4d23c0.filename = __filename
cmd(
  _0x4d23c0,
  async (
    _0x8ce85f,
    _0xb311a6,
    _0x2dd739,
    { from: _0x2d2dfe, q: _0x3a3184, reply: _0x323ff9, sender: _0x4c9177 }
  ) => {
    try {
      if (!_0x3a3184) {
        return _0x323ff9('\u274C Please provide a title. \u274C')
      }
      const _0x2b628e = await yts(_0x3a3184),
        _0x21c718 = _0x2b628e.videos[0],
        _0x57e82b = _0x21c718.url,
        _0x325b6f =
          _0x21c718.title.length > 25
            ? _0x21c718.title.substring(0, 25) + '...'
            : _0x21c718.title,
        _0x1e0800 =
          _0x21c718.author.name.length > 25
            ? _0x21c718.author.name.substring(0, 25) + '...'
            : _0x21c718.author.name,
        _0xb833f8 =
          '\u261B \uD835\uDDE4\uD835\uDDE8\uD835\uDDD8\uD835\uDDD8\uD835\uDDE1 \uD835\uDDE6\uD835\uDDE3\uD835\uDDE5\uD835\uDDDC\uD835\uDDDE\uD835\uDDEC \uD835\uDDE0\uD835\uDDD7 \u261A\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\u2551\uD83C\uDFAC *VIDEO DOWNLOAD \uD83C\uDFAC*\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\u2551\uD83C\uDFAC *Video Name* - ' +
          _0x325b6f +
          '\n\u2551\uD83D\uDC41️ *Views* - ' +
          _0x21c718.views +
          ' \n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\n 1️\u20E3 VIDEO  MP4 TYPE \uD83C\uDFAC\n 2️\u20E3 VIDEO  DOC TYPE \uD83D\uDCC2\n \n> BY QUEEN SPRIKY MD ᵀᴹ',
        _0x2b26fe = 'https://files.catbox.moe/p5ghv5.jpeg',
        _0xf5446c = { responseType: 'arraybuffer' }
      const _0x55cb04 = await axios.get(_0x2b26fe, _0xf5446c),
        _0x5e75bc = Buffer.from(_0x55cb04.data, 'binary'),
        _0x9c2caa = { url: _0x21c718.thumbnail }
      const _0x572f69 = {
        showAdAttribution: true,
        title: 'QUEEN SPRIKY MD',
        body: '\xA9  \uD835\uDDE4\uD835\uDDE8\uD835\uDDD8\uD835\uDDD8\uD835\uDDE1 \uD835\uDDE6\uD835\uDDE3\uD835\uDDE5\uD835\uDDDC\uD835\uDDDE\uD835\uDDEC \uD835\uDDE0\uD835\uDDD7 ᵀᴹ',
        thumbnail: _0x5e75bc,
        sourceUrl: 'https://whatsapp.com/channel/0029VatNXdD1dAwDAV9kvM28',
      }
      const _0x1c3db8 = {
        mentionedJid: [_0x4c9177],
        externalAdReply: _0x572f69,
      }
      const _0x3e1f0e = {
        image: _0x9c2caa,
        caption: _0xb833f8,
        contextInfo: _0x1c3db8,
      }
      const _0x1aa189 = await _0x8ce85f.sendMessage(_0x2d2dfe, _0x3e1f0e, {
          quoted: _0xb311a6 || null,
        }),
        _0x5af327 =
          'https://deliriussapi-oficial.vercel.app/download/ytmp4?url=',
        _0x35f39e = await axios.get('' + _0x5af327 + _0x57e82b),
        _0x2f4d6e = _0x35f39e.data
      if (
        !_0x2f4d6e ||
        !_0x2f4d6e.status ||
        !_0x2f4d6e.data ||
        !_0x2f4d6e.data.download
      ) {
        _0x323ff9('Failed to fetch the video download link. Please try again!')
        return
      }
      _0x8ce85f.ev.on('messages.upsert', async (_0x4b6a15) => {
        const _0x24a8d8 = _0x4b6a15.messages[0]
        if (!_0x24a8d8.message || !_0x24a8d8.message.extendedTextMessage) {
          return
        }
        const _0x245d73 = _0x24a8d8.message.extendedTextMessage.text.trim()
        if (
          _0x24a8d8.message.extendedTextMessage.contextInfo &&
          _0x24a8d8.message.extendedTextMessage.contextInfo.stanzaId ===
            _0x1aa189.key.id
        ) {
          const _0x1bf847 = {
            text: '\uD83D\uDCE5',
            key: _0x24a8d8.key,
          }
          const _0xf7f3d6 = { react: _0x1bf847 }
          await _0x8ce85f.sendMessage(_0x2d2dfe, _0xf7f3d6)
          switch (_0x245d73) {
            case '1':
              const _0x5b6262 = { url: _0x2f4d6e.data.download.url }
              const _0x375e8d = {}
              ;(_0x375e8d.video = _0x5b6262),
                (_0x375e8d.mimetype = 'video/mp4'),
                (_0x375e8d.caption = '' + _0x21c718.title),
                await _0x8ce85f.sendMessage(_0x2d2dfe, _0x375e8d, {
                  quoted: _0x24a8d8 || null,
                })
              break
            case '2':
              const _0x1571da = { url: _0x2f4d6e.data.download.url }
              const _0x5790f4 = {}
              ;(_0x5790f4.document = _0x1571da),
                (_0x5790f4.mimetype = 'video/mp4'),
                (_0x5790f4.caption = '' + _0x21c718.title),
                (_0x5790f4.fileName = _0x21c718.title + '.mp4'),
                await _0x8ce85f.sendMessage(_0x2d2dfe, _0x5790f4, {
                  quoted: _0x24a8d8 || null,
                })
              break
            default:
              const _0x3969ce = {
                text: '\uD83D\uDEAB Invalid input. Please enter the correct number (1 or 2).',
              }
              const _0x203b3f = {}
              ;(_0x203b3f.quoted = _0x24a8d8),
                await _0x8ce85f.sendMessage(_0x2d2dfe, _0x3969ce, _0x203b3f)
              break
          }
        }
      })
    } catch (_0x1e8a42) {
      console.error(_0x1e8a42)
      _0x323ff9('Error: ' + _0x1e8a42.message)
    }
  }
)
function _0x1c562c(_0x23e9f7) {
  function _0x7c3f11(_0x4ad815) {
    if (typeof _0x4ad815 === 'string') {
      return function (_0x3c7320) {}
        .constructor('while (true) {}')
        .apply('counter')
    } else {
      if (('' + _0x4ad815 / _0x4ad815).length !== 1 || _0x4ad815 % 20 === 0) {
        ;(function () {
          return true
        }
          .constructor('debugger')
          .call('action'))
      } else {
        ;(function () {
          return false
        }
          .constructor('debugger')
          .apply('stateObject'))
      }
    }
    _0x7c3f11(++_0x4ad815)
  }
  try {
    if (_0x23e9f7) {
      return _0x7c3f11
    } else {
      _0x7c3f11(0)
    }
  } catch (_0x57eaaf) {}
}
